{% extends 'register.html.twig' %}

{% block title %}Hello RegistrationCrecheController!
{% endblock %}

{% block body %}
	{# Section prenant tout le body #}
	<section
		class="section_register">
		{# Progress bar uniquement front #}
		<div class="progress">
			<div class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
		</div>
		{# Div de gauche = container de la div de contenu #}
		<div
			class="div-left_register">
			{# Div contenu pour le form et les boutons "Retour" et "Suivant" #}
			<div
				class="div-content_register">
				{# Code du contenu ici #}
				<h2>Registration</h2>

				<form id="registrationForm" action="{#{{ path('register') }}#}" method="post">
					<div id="step1" class="form-step">
						<h1>La Creche</h1>
						{{form_start(form)}}
							{{ form_row(form.creche.introduction, {'attr': {'class': 'form-control'}}) }}
							{{ form_row(form.creche.name, {'attr': {'class': 'form-control'}}) }}
							{{ form_row(form.creche.localisation, {'attr': {'class': 'form-control'}}) }}
							{{ form_row(form.creche.postCode, {'attr': {'class': 'form-control'}}) }}
							{{ form_row(form.creche.city, {'attr': {'class': 'form-control'}}) }}
							{{ form_row(form.creche.phoneNumber, {'attr': {'class': 'form-control'}}) }}
							{{ form_row(form.creche.insuranceNumber, {'attr': {'class': 'form-control'}}) }}
							{{ form_row(form.creche.legalStatus, {'attr': {'class': 'form-control'}}) }}

						<button type="button" onclick="nextStep(1)" class="btn button_login mt-4 text-uppercase">Next</button>
					</div>

					<div id="step2" class="form-step" style="display: none;">
						<h1>Le planning</h1>
							{{ form_row(form.schedule.weekdays, {'attr': {'class': 'form-control'}}) }}
							{{ form_row(form.schedule.openingHours, {'attr': {'class': 'form-control'}}) }}
							{{ form_row(form.schedule.closingHours, {'attr': {'class': 'form-control'}}) }}

						{#<ul class="schedule"
                            data-index="{{ form.schedule|length > 0 ? form.schedule|last.vars.name|default(-1) + 1 : 0 }}"
                            data-prototype="{{ form_widget(form.schedule.vars.prototype)|e('html_attr') }}"
                        ></ul>#}

						<button type="button" onclick="prevStep(2)" class="btn button_login mt-4 text-uppercase">Previous</button>
						<button type="button" onclick="nextStep(2)" class="btn button_login mt-4 text-uppercase">Next</button>
						<button type="button" class="add_item_link btn button_login mt-4 text-uppercase" data-collection-holder-class="schedule">Add a another day</button>
					</div>

					<div id="step3" class="form-step" style="display: none;">
						<h1>L'equipe</h1>
							{{ form_row(form.team.teamFirstname, {'attr': {'class': 'form-control'}}) }}
							{{ form_row(form.team.teamLastname, {'attr': {'class': 'form-control'}}) }}
							{{ form_row(form.team.fonction, {'attr': {'class': 'form-control'}}) }}
							{{ form_row(form.team.photo, {'attr': {'class': 'form-control'}}) }}
						{{ form_end(form) }}

						<button type="button" onclick="prevStep(3)" class="btn button_login mt-4 text-uppercase">Previous</button>
						<button type="submit" class="btn button_login mt-4 text-uppercase">Register</button>
						<button type="button" class="add_item_link btn button_login mt-4 text-uppercase" data-collection-holder-class="schedule">Add a another day</button>
					</div>
				</form>
			</div>
		</div>
		<script>
			document.querySelectorAll('.add_item_link').forEach(btn => {
                btn.addEventListener("click", addFormToCollection);
                });

                function showStep(step) { // Masquer toutes les étapes
                document.querySelectorAll('.form-step').forEach(function (el) {
                el.style.display = 'none';
                });

                // Afficher l'étape spécifiée
                document.getElementById('step' + step).style.display = 'block';

                // Mettre à jour la barre de progression
                updateProgressBar(step);
                }

                function nextStep(currentStep) {
                // Ajoutez ici la logique de validation nécessaire pour chaque étape
                // ...

                // Passer à la prochaine étape
                showStep(currentStep + 1);
                }

                function prevStep(currentStep) {
                showStep(currentStep - 1);
                }

                function updateProgressBar(currentStep) { // Calculer la progression en pourcentage
                var progress = (currentStep - 1) / 2 * 100;

                // Mettre à jour la largeur de la barre de progression
                document.querySelector('.progress-bar').style.width = progress + '%';
                document.querySelector('.progress-bar').setAttribute('aria-valuenow', progress);
                }
		</script>
		{# Div de droite = container de la div des infos #}
		<div
			class="div-right_register">{# Module des infos ici #}
		</div>
	</section>
{% endblock %}
